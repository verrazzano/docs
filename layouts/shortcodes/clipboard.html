<!--<button id="{{ .Get "buttonId" }}">Copy</button>-->

<div >
    {{ .Inner | markdownify }}
</div>

<head>
    <style type="text/css">
        .highlight-wrapper {
            display: block;
        }

        .copy-code-button {
            position: absolute;
            z-index: 2;
            right: 0;
            top: -29px;
            font-size: 13px;
            font-weight: 700;
            line-height: 14px;
            letter-spacing: 0.5px;
            width: 65px;
            color: #ffffff;
            background-color: #30638E;
            border: 1.25px solid #232326;
            /*border-top-left-radius: 4px;*/
            /*border-top-right-radius: 4px;*/
            /*border-bottom-right-radius: 0px;*/
            /*border-bottom-left-radius: 0px;*/
            white-space: nowrap;
            padding: 6px 6px 7px 6px;
            margin: 0 0 0 1px;
            cursor: pointer;
            opacity: 1;
        }

        .copy-code-button:hover,
        .copy-code-button:focus,
        .copy-code-button:active,
        .copy-code-button:active:hover {
            color: #222225;
            background-color: #b3b3b3;
            opacity: 1;
        }

        pre, code {
            margin: 0;
            padding: 0;
        }

    </style>
</head>


<script>
    function createCopyButton(highlightDiv) {
        const button = document.createElement("button");
        button.className = "copy-code-button";
        button.type = "button";
        button.innerText = "Copy";
        button.addEventListener("click", () =>
            copyCodeToClipboard(button, highlightDiv)
        );
        addCopyButtonToDom(button, highlightDiv);
    }

    async function copyCodeToClipboard(button, highlightDiv) {
        const codeToCopy = highlightDiv.querySelector(":last-child > code")
            .innerText;
        try {
            result = await navigator.permissions.query({ name: "clipboard-write" });
            if (result.state == "granted" || result.state == "prompt") {
                await navigator.clipboard.writeText(codeToCopy);
            } else {
                copyCodeBlockExecCommand(codeToCopy, highlightDiv);
            }
        } catch (_) {
            copyCodeBlockExecCommand(codeToCopy, highlightDiv);
        } finally {
            codeWasCopied(button);
        }
    }

    function copyCodeBlockExecCommand(codeToCopy, highlightDiv) {
        const textArea = document.createElement("textArea");
        textArea.contentEditable = "true";
        textArea.readOnly = "false";
        textArea.className = "copyable-text-area";
        textArea.value = codeToCopy;
        highlightDiv.insertBefore(textArea, highlightDiv.firstChild);
        const range = document.createRange();
        range.selectNodeContents(textArea);
        const sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
        textArea.setSelectionRange(0, 999999);
        document.execCommand("copy");
        highlightDiv.removeChild(textArea);
    }

    function codeWasCopied(button) {
        button.blur();
        button.innerText = "Copied!";
        setTimeout(function () {
            button.innerText = "Copy";
        }, 2000);
    }

    function addCopyButtonToDom(button, highlightDiv) {
        highlightDiv.insertBefore(button, highlightDiv.firstChild);
        const wrapper = document.createElement("div");
        wrapper.className = "highlight-wrapper";
        highlightDiv.parentNode.insertBefore(wrapper, highlightDiv);
        wrapper.appendChild(highlightDiv);
    }

    document
        .querySelectorAll(".highlight")
        .forEach((highlightDiv) => createCopyButton(highlightDiv));
</script>